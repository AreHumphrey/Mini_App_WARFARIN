<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Запись на прием</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='appointment_form.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

<div class="container-appointment">
    <h2 class="h2-appointment">Время</h2>

    <div class="calendar">
        <div class="calendar-header">
            <span class="calendar-month">Август</span>
            <img src="{{ url_for('static', filename='images/warfarin.png') }}" alt="Логотип" class="calendar-logo">
        </div>
        <div class="calendar-days">
            <span>Пн</span><span>Вт</span><span>Ср</span><span>Чт</span><span>Пт</span><span>Сб</span><span>Вс</span>
        </div>
        <div class="calendar-dates">
            <!-- Пример дат (должны генерироваться динамически) -->
            <span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span class="active">8</span>
            <span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span>
        </div>
    </div>

    <h3 class="available-time">Выберите доступное время:</h3>
    <div class="time-options" id="time-options">
        <!-- Время загружается динамически на основе выбранного дня -->
    </div>

    <div class="form-group">
        <label for="full-name" class="label">ФИО</label>
        <input type="text" id="full-name" class="input" placeholder="Введите ваше ФИО">
    </div>

    <div class="form-group">
        <label for="additional-info" class="label">Дополнительная информация:</label>
        <textarea id="additional-info" class="textarea" placeholder="Введите информацию, необходимую для приема"></textarea>
    </div>

    <div class="form-group">
        <label class="label">Прикрепить файл:</label>
        <input type="file" id="file-upload" class="file-input">
    </div>

    <div class="form-group">
        <label class="label">Прикрепить журнал:</label>
        <input type="checkbox" id="attach-journal">
    </div>

    <button class="appointment-button" onclick="submitForm()">Записаться</button>

</div>

<script>
    const doctorId = new URLSearchParams(window.location.search).get('doctorId');
    const availableTime = {
        1: {
            "2024-08-08": ["08:00", "09:00", "12:30", "16:40"],
            "2024-08-09": ["10:00", "11:00", "13:00", "15:00"]
        },
        2: {
            "2024-08-08": ["09:00", "11:00", "14:00", "16:00"],
            "2024-08-09": ["08:00", "10:00", "12:00", "14:00"]
        }
    };

    const selectedDate = "2024-08-08"; // Должен динамически меняться при выборе даты
    const times = availableTime[doctorId][selectedDate] || [];
    const timeOptionsContainer = document.getElementById('time-options');

    times.forEach(time => {
        const button = document.createElement('button');
        button.textContent = time;
        button.className = 'time-button';
        timeOptionsContainer.appendChild(button);
    });

    function submitForm() {
        const fullName = document.getElementById('full-name').value;
        const additionalInfo = document.getElementById('additional-info').value;
        const fileUpload = document.getElementById('file-upload').files[0];
        const attachJournal = document.getElementById('attach-journal').checked;

        console.log('Doctor ID:', doctorId);
        console.log('Full Name:', fullName);
        console.log('Additional Info:', additionalInfo);
        console.log('File:', fileUpload ? fileUpload.name : 'No file attached');
        console.log('Attach Journal:', attachJournal);
    }
</script>

</body>
</html>
